<!DOCTYPE html>
<html lang="en">


  <head>
    
    <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>RIDING BYTES</title>


<meta name="author" content="">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="google-site-verification" content="KWcX-TpnKFHyDQEIyT9i8oCI6kr2bHOml-vay9XLPe4" />



<link href="/vendor/bootstrap/css/bootstrap.min.css"                     rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/fontawesome/css/font-awesome.css"                    rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/novecento/css/novecento-font.css"                    rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/fancybox/css/jquery.fancybox.css?v=2.1.5"            rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/fancybox/css/jquery.fancybox-buttons.css?v=1.0.5"    rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/flexslider/css/flexslider.css"                       rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/rs-plugin/css/settings.css"                          rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/rs-plugin/css/extralayers.css"                       rel="stylesheet" type="text/css" media="screen" />
<link href="/vendor/feather/css/feather.css"                             rel="stylesheet" type="text/css" media="screen" />


<link href="/css/ridingbytes.css"                                        rel="stylesheet" type="text/css" media="screen" />



<script src="/vendor/jquery/js/jquery-1.10.1.min.js"                     type="text/javascript"></script>
<script src="/vendor/bootstrap/js/bootstrap.min.js"                      type="text/javascript"></script>
<script src="/vendor/sticky/js/jquery.sticky.js"                         type="text/javascript"></script>
<script src="/vendor/mousewheel/js/jquery.mousewheel-3.0.6.pack.js"      type="text/javascript"></script>
<script src="/vendor/fancybox/js/jquery.fancybox.pack.js?v=2.1.5"        type="text/javascript"></script>
<script src="/vendor/fancybox/js/jquery.fancybox-buttons.js?v=1.0.5"     type="text/javascript"></script>
<script src="/vendor/fancybox/js/jquery.fancybox-media.js?v=1.0.6"       type="text/javascript"></script>
<script src="/vendor/superfish/js/hoverIntent.js"                        type="text/javascript"></script>
<script src="/vendor/superfish/js/superfish.js"                          type="text/javascript"></script>
<script src="/vendor/superfish/js/supersubs.js"                          type="text/javascript"></script>
<script src="/vendor/flickr/js/jflickrfeed.min.js"                       type="text/javascript"></script>
<script src="/vendor/flexslider/js/jquery.flexslider-min.js"             type="text/javascript"></script>
<script src="/vendor/flickity/js/flickity.pkgd.min.js"                   type="text/javascript"></script>
<script src="/vendor/rs-plugin/js/jquery.themepunch.tools.min.js"        type="text/javascript"></script>
<script src="/vendor/rs-plugin/js/jquery.themepunch.revolution.min.js"   type="text/javascript"></script>
<script src="/vendor/stellar/js/jquery.stellar.min.js"                   type="text/javascript"></script>
<script src="/vendor/isotope/js/jquery.isotope.min.js"                   type="text/javascript"></script>
<script src="/vendor/imagesloaded/js/imagesloaded.pkgd.min.js"           type="text/javascript"></script>
<script src="/vendor/modernizr/js/modernizr.js"                          type="text/javascript"></script>
<script src="https://maps.google.com/maps/api/js?sensor=false"                              type="text/javascript"></script>

<script src="/js/jqBootstrapValidation.js"                               type="text/javascript"></script>
<script src="/js/script.js"                                              type="text/javascript"></script>
<script src="/js/ridingbytes.js"                                         type="text/javascript"></script>



<link href='https://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>


    
  </head>

  <body class="template-default-page-listing">

    
    <div id="sub-top-light">
      <div class="container">
  <div class="top-items top-items-left">
    
    <div class="social-link"><a href="https://www.facebook.com/ridingbytes"><i class="fa fa-facebook"></i></a></div>
    
    <div class="social-link"><a href="https://github.com/ridingbytes"><i class="fa fa-github"></i></a></div>
    
    <div class="social-link"><a href="https://www.linkedin.com/company/riding-bytes"><i class="fa fa-linkedin"></i></a></div>
    
    <div class="social-link"><a href="https://twitter.com/ridingbytes"><i class="fa fa-twitter"></i></a></div>
    
  </div>
  <div class="top-items top-items-right">
    <div class="" id="language-links">
      
        
          
            <a href="/categories/server/" class="btn btn-xs">English</a>
          
        
	    
        
          <a href="" class="btn btn-xs btn-default">Deutsch</a>
        
	    
    </div>
  </div>
</div>

    </div>
    

    
    <header id="header-wrapper-mp" class="sticky-menu-light default-page-listing">

      <div class="sticky-header header-light" role="navigation">
        <div class="container mp-nav">

          
          <div id="site-title">
  <h1 class="font-accident-one-bold">
    <a href="/">
      
        RIDING BYTES
      
    </a>
  </h1>
</div>

          

          
          
<div id="mobnav-btn"><i class="fa fa-bars"></i></div>
<nav id="main-menu" class="site-navigation primary-navigation" role="navigation">
  <ul class="sf-menu clearfix" id="example">
     
     <li>
       <a href="/de">Startseite</a>
       
       <div class="mobnav-subarrow"></div>
       <ul class="submenu">
           
           <li><a href="/de/#senaite" class="page-scroll">SENAITE LIMS</a></li>
           
           <li><a href="/de/#plone" class="page-scroll">PLONE CMS</a></li>
           
       </ul>
       
     </li>
     
     <li>
       <a href="/de/portfolio">Portfolio</a>
       
     </li>
     
     <li>
       <a href="/de/blog">Blog</a>
       
     </li>
     
     <li>
       <a href="/de/about">Über</a>
       
     </li>
     
     <li>
       <a href="/de/contact">Kontakt</a>
       
     </li>
     
  </ul>
</nav>


          

        </div>
      </div>

      
      <div class="container">
  <div id="page-title">
    <div class="page-title-details">
      <h1 class="font-accident-one fontcolor-invert">Server</h1>
      <h4 class="font-accident-one-light fontcolor-invert"></h4>
      
    </div>
  </div>
</div>

      

    </header>
    

    
    <div id="content">

      
      <div class="down-arrow">&nbsp;</div>
      

      
      <div class="container">
        <div class="row">
          <div id="how to configure openldap to be usable for owncloud">
            
            <div class="col-md-12">
              

<h1 id="owncloud-and-openldap">OwnCloud and OpenLDAP</h1>

<p>We recently integrated <a href="https://owncloud.org/nine" title="OwnCloud nine">OwnCloud 9</a> in our IT infrastructure and wanted to
hook it up with our <a href="http://www.openldap.org" title="OpenLDAP">OpenLDAP</a> server, which is running on a <a href="http://releases.ubuntu.com/16.04/" title="Ubuntu 16.04">Ubuntu 16.04 LTS</a>
<em>Xenial Xerus</em> Server.</p>

<p>After installing the required <a href="https://doc.owncloud.org/server/9.0/admin_manual/configuration_user/user_auth_ldap.html" title="OwnCloud LDAP Manual">LDAP user and group</a> App in OwnCloud,
we could hook our LDAP server into OwnCloud. However, the Group selection to
narrow down the users who are allowed to log into OwnCloud was disabled, since
the <code>memberOf</code> <a href="http://www.openldap.org/doc/admin24/overlays.html" title="OpenLDAP overlays">LDAP Overlay</a> was not yet supported by our companys LDAP.</p>

<p>The goal was to put all users into a group called <code>onwCloud</code> which should be
able to log into OwnCloud as seen in this screenshot:</p>


<figure class="image-left">
    
        <img src="/img/blog/owncloud-ldap-configuration.png" class="img-responsive"  />
    
    
</figure>



<h1 id="adding-the-memberof-overlay">Adding the memberOf Overlay</h1>

<p>We are using <code>OpenLDAP 2.4.4</code> with a <a href="http://www.openldap.org/doc/admin24/backends.html" title="OpenLDAP Backends">LMDB Backend</a>, so the following <code>ldif</code>
configurations make use of the new configuration and this backend.</p>

<p>First we created the files <code>/etc/ldap/memberof.ldif</code> and <code>/etc/ldap/refint.ldif</code>
on our LDAP Server with the following contents.</p>

<p><code>memberof.ldif</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-properties" data-lang="properties">  dn: cn=module,cn=config
  cn: module
  objectClass: olcModuleList
  objectclass: top
  olcModuleLoad: memberof.la
  olcModulePath: /usr/lib/ldap

  dn: olcOverlay={0}memberof,olcDatabase={1}mdb,cn=config
  objectClass: olcConfig
  objectClass: olcMemberOf
  objectClass: olcOverlayConfig
  objectClass: top
  olcOverlay: memberof
  olcMemberOfDangling: ignore
  olcMemberOfRefInt: TRUE
  olcMemberOfGroupOC: groupOfNames
  olcMemberOfMemberAD: member
  olcMemberOfMemberOfAD: memberOf</code></pre></div>

<p><code>refint.ldif</code>:
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-properties" data-lang="properties">  dn: cn=module,cn=config
  cn: module
  objectclass: olcModuleList
  objectclass: top
  olcmoduleload: refint.la
  olcmodulepath: /usr/lib/ldap

  dn: olcOverlay={1}refint,olcDatabase={1}mdb,cn=config
  objectClass: olcConfig
  objectClass: olcOverlayConfig
  objectClass: olcRefintConfig
  objectClass: top
  olcOverlay: {1}refint
  olcRefintAttribute: memberof member manager owner</code></pre></div></p>

<div class="container rb-divider">
  <div class="row">
    <div class="dividewhite2"></div>
    <div class="e-block-centered">
      &mdash; <img src="/img/logo_quadratisch.png" width="32" /> &mdash;
    </div>
    <div class="dividewhite2"></div>
  </div>
</div>


<p>Then we added the configurations to our OpenLDAP with the <a href="http://www.openldap.org/software//man.cgi?query=ldapmodify&amp;sektion=1&amp;apropos=0&amp;manpath=OpenLDAP+2.4-Release" title="ldapmodify, ldapadd">ldapadd</a> command:</p>

<pre><code>ldapadd -Q -Y EXTERNAL -H ldapi:/// -f memberof.ldif
ldapadd -Q -Y EXTERNAL -H ldapi:/// -f refint.ldif
</code></pre>

<p>In the next step we added a <code>groupOfNames</code> object <code>cn=ownCloud</code> to our LDAP:</p>


<figure class="image-left">
    
        <img src="/img/blog/openldap-groupOfNames.png" class="img-responsive"  />
    
    
</figure>



<p>And added a <em>Test User</em> <code>uid=testuser</code> as a <code>member</code> to this group:</p>


<figure class="image-left">
    
        <img src="/img/blog/openldap-member.png" class="img-responsive"  />
    
    
</figure>



<div class="container rb-divider">
  <div class="row">
    <div class="dividewhite2"></div>
    <div class="e-block-centered">
      &mdash; <img src="/img/logo_quadratisch.png" width="32" /> &mdash;
    </div>
    <div class="dividewhite2"></div>
  </div>
</div>


<p>Finally we tested the group ownership:</p>

<pre><code>root@ridingbytes:~# ldapsearch -LL -Y EXTERNAL -H ldapi:/// &quot;(uid=testuser)&quot; -b dc=ridingbytes,dc=com memberOf
SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
version: 1

dn: cn=Test User,ou=users,dc=ridingbytes,dc=com
memberOf: cn=ownCloud,ou=groups,dc=ridingbytes,dc=com
</code></pre>

<h2 id="conclusion">Conclusion</h2>

<p>OpenLDAP plays now nicely with OwnCloud and the Group Selection is fully
functioning. Only members of the <code>ownCloud</code> group are allowed to log into
OwnCloud.</p>

<p>Another great example how Open Source Software provides enterprise functionality
without any license costs or vendor lock-ins. Thanks to the developers and the
Open Source Community for this brilliant pieces of Software.</p>

<div class="container rb-divider">
  <div class="row">
    <div class="dividewhite2"></div>
    <div class="e-block-centered">
      &mdash; <img src="/img/logo_quadratisch.png" width="32" /> &mdash;
    </div>
    <div class="dividewhite2"></div>
  </div>
</div>


            </div>
          </div>
        </div>
      </div>
      

    </div>
  

    
    <a class="gm-toggle-link">
      <div class="gm-toggle">
          <i class="fa fa-map-marker"></i>
      </div>
    </a>
    <div id="gm-panel">
        <div id="google-map" class="bigmap"></div>
    </div>
    

    
    <div id="footer">
      
      <div class="container">

  <div class="row">

    
    <div class="col-sm-4">
      
<div class="infoblock">
  <h2 class="font-accident-one-bold">Riding Bytes</h2>

  
  <p class=" ">RIDING BYTES is a web development company, which is specialized in UI/UX design, server based solutions and consulting services.</p>
  
  <p class=" ">With over 10 years of experience in web development and consulting, we provide the right solutions for small, medium and large enterprises.</p>
  

</div>


    </div>

    
    <div class="col-sm-4">
      
<div class="infoblock">
  <h2 class="font-accident-one-bold">Kontakt</h2>

  
  <div class="contact">

    
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-home"></i></div>
      <div class="addr-text">Würzburger Straße 81</div>
      <div class="addr-text">90766 Fürth</div>
      <div class="addr-text">Deutschland</div>
    </div>

    
    <div class="dividewhite1"></div>
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-phone"></i></div>
      <div class="addr-text"><a href="tel:&#43;49%20%280%29%20911%20974%20930%2090">&#43;49 (0) 911 974 930 90</a></div>
    </div>

    
    <div class="dividewhite1"></div>
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-link"></i></div>
      <div class="addr-text"><a href="https://www.ridingbytes.com">https://www.ridingbytes.com</a></div>
    </div>

    
    <div class="dividewhite1"></div>
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-envelope"></i></div>
      <div class="addr-text"><a href="mailto:hallo@ridingbytes.com">hallo@ridingbytes.com</a></div>
    </div>

  </div>
  

</div>


    </div>
    

    
    <div class="col-sm-4">
      
<div class="infoblock">

  <h2 class="font-accident-one-bold"> Follow us </h2>
  <div class="follow">

    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-facebook"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://www.facebook.com/ridingbytes">Facebook</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-github"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://github.com/ridingbytes">GitHub</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-linkedin"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://www.linkedin.com/company/riding-bytes">LinkedIn</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-twitter"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://twitter.com/ridingbytes">Twitter</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    

  </div>
</div>


    </div>
    

  </div>
</div>









      
      
<div id="copyrights-wrapper">
  <div class="container">
    <div class="copyright">
      <div class="copy-attrs">
        &copy; 2015 - 2018
        <a href="/de" target="_blank">RIDING BYTES</a>. Alle Rechte vorbehalten
      </div>

      
      <div class="copy-link">
        <a href="/de/legal">Impressum</a>
      </div>
      

    </div>
  </div>
</div>


    </div>
    

    
    <div id="back-top"><a href="#top"></a></div>
    

  </body>
</html>
