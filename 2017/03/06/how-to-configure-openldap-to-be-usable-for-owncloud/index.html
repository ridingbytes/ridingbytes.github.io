<!DOCTYPE html>
<html lang="en">


  <head>
    
    <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>RIDING BYTES</title>


<meta name="author" content="Ramon Bartl">
<meta name="description" content="RIDING BYTES UG (haftungsbeschrÃ¤nkt)">
<meta name="keywords" content="Bika,LIMS,Plone,Python,Consulting">
<meta name="google-site-verification" content="KWcX-TpnKFHyDQEIyT9i8oCI6kr2bHOml-vay9XLPe4" />



<link href="http://ridingbytes.com/vendor/bootstrap/css/bootstrap.min.css"                     rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/fontawesome/css/font-awesome.css"                    rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/novecento/css/novecento-font.css"                    rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/fancybox/css/jquery.fancybox.css?v=2.1.5"            rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/fancybox/css/jquery.fancybox-buttons.css?v=1.0.5"    rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/flexslider/css/flexslider.css"                       rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/rs-plugin/css/settings.css"                          rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/rs-plugin/css/extralayers.css"                       rel="stylesheet" type="text/css" media="screen" />
<link href="http://ridingbytes.com/vendor/feather/css/feather.css"                             rel="stylesheet" type="text/css" media="screen" />


<link href="http://ridingbytes.com/css/ridingbytes.css"                                        rel="stylesheet" type="text/css" media="screen" />



<script src="http://ridingbytes.com/vendor/jquery/js/jquery-1.10.1.min.js"                     type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/bootstrap/js/bootstrap.min.js"                      type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/sticky/js/jquery.sticky.js"                         type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/mousewheel/js/jquery.mousewheel-3.0.6.pack.js"      type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/fancybox/js/jquery.fancybox.pack.js?v=2.1.5"        type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/fancybox/js/jquery.fancybox-buttons.js?v=1.0.5"     type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/fancybox/js/jquery.fancybox-media.js?v=1.0.6"       type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/superfish/js/hoverIntent.js"                        type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/superfish/js/superfish.js"                          type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/superfish/js/supersubs.js"                          type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/flickr/js/jflickrfeed.min.js"                       type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/flexslider/js/jquery.flexslider-min.js"             type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/flickity/js/flickity.pkgd.min.js"                   type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/rs-plugin/js/jquery.themepunch.tools.min.js"        type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/rs-plugin/js/jquery.themepunch.revolution.min.js"   type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/stellar/js/jquery.stellar.min.js"                   type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/isotope/js/jquery.isotope.min.js"                   type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/imagesloaded/js/imagesloaded.pkgd.min.js"           type="text/javascript"></script>
<script src="http://ridingbytes.com/vendor/modernizr/js/modernizr.js"                          type="text/javascript"></script>
<script src="https://maps.google.com/maps/api/js?sensor=false"                              type="text/javascript"></script>

<script src="http://ridingbytes.com/js/jqBootstrapValidation.js"                               type="text/javascript"></script>
<script src="http://ridingbytes.com/js/script.js"                                              type="text/javascript"></script>
<script src="http://ridingbytes.com/js/ridingbytes.js"                                         type="text/javascript"></script>



<link href='http://fonts.googleapis.com/css?family=Oxygen:400,700' rel='stylesheet' type='text/css'>


    
  </head>

  <body class="template-blog-page-single">

    
    <div id="sub-top-light">
      <div class="container">
        <div class="top-contacts">
          <div class="container">
  <div class="top-items top-items-left">
    
    <div class="social-link"><a href="https://www.facebook.com/ridingbytes"><i class="fa fa-facebook"></i></a></div>
    
    <div class="social-link"><a href="https://github.com/ridingbytes"><i class="fa fa-github"></i></a></div>
    
    <div class="social-link"><a href="https://www.linkedin.com/company/riding-bytes"><i class="fa fa-linkedin"></i></a></div>
    
    <div class="social-link"><a href="https://twitter.com/ridingbytes"><i class="fa fa-twitter"></i></a></div>
    
  </div>
  <div class="top-items top-items-right">
    <div id="language-links">
      <i class="fa fa-globe"></i>
      <a href="/" alt="en" title="English">English</a> / <a href="/de" alt="de" title="Deutsch">Deutsch</a>
    </div>
  </div>
</div>

        </div>
      </div>
     </div>
    

    
    <header id="header-wrapper-mp" class="sticky-menu-light blog-page-single">

      <div class="sticky-header header-light" role="navigation">
        <div class="container mp-nav">

          
          <div id="site-title">
  <h1 class="font-accident-one-bold">
    <a href="http://ridingbytes.com/">
      
        RIDING BYTES
      
    </a>
  </h1>
</div>

          

          
          
<div id="mobnav-btn"><i class="fa fa-bars"></i></div>
<nav id="main-menu" class="site-navigation primary-navigation" role="navigation">
  <ul class="sf-menu clearfix" id="example">
     
     <li>
       <a href="/">Home</a>
       
     </li>
     
     <li>
       <a href="/services">Services</a>
       
       <div class="mobnav-subarrow"></div>
       <ul class="submenu">
           
           <li><a href="/services/#development" class="page-scroll">Development</a></li>
           
           <li><a href="/services/#uiux" class="page-scroll">UI/UX</a></li>
           
           <li><a href="/services/#consulting" class="page-scroll">Consulting</a></li>
           
           <li><a href="/services/#administration" class="page-scroll">Administration</a></li>
           
       </ul>
       
     </li>
     
     <li>
       <a href="/portfolio">Portfolio</a>
       
     </li>
     
     <li>
       <a href="/blog">Blog</a>
       
     </li>
     
     <li>
       <a href="/about">About</a>
       
     </li>
     
     <li>
       <a href="/contact">Contact</a>
       
     </li>
     
  </ul>
</nav>


          

        </div>
      </div>

      
      <div class="container">
  <div id="page-title">
    <div class="page-title-details">
      <h1 class="font-accident-one fontcolor-invert">How to configure OpenLDAP to be usable for OwnCloud</h1>
      <h4 class="font-accident-one-light fontcolor-invert">Configure Reverse Group Membership with OpenLDAP on Ubuntu 16.04</h4>
      <ul>
        
        <li><a href="/">Home</a>&nbsp;&nbsp;&nbsp;/</li>
        <li><a href="/blog">Blog</a>&nbsp;&nbsp;&nbsp;/</li>
        
        <li>How to configure OpenLDAP to be usable for OwnCloud</li>
      </ul>
    </div>
  </div>
</div>

      

    </header>
    

    
    <div id="content">

      
      

      
      <div class="down-arrow">&nbsp;</div>
      

      <div class="container">
        <div class="row">
          
          <div class="col-md-12 post-content">
            

<h1 id="owncloud-and-openldap">OwnCloud and OpenLDAP</h1>

<p>We recently integrated <a href="https://owncloud.org/nine" title="OwnCloud nine">OwnCloud 9</a> in our IT infrastructure and wanted to
hook it up with our <a href="http://www.openldap.org" title="OpenLDAP">OpenLDAP</a> server, which is running on a <a href="http://releases.ubuntu.com/16.04/" title="Ubuntu 16.04">Ubuntu 16.04 LTS</a>
<em>Xenial Xerus</em> Server.</p>

<p>After installing the required <a href="https://doc.owncloud.org/server/9.0/admin_manual/configuration_user/user_auth_ldap.html" title="OwnCloud LDAP Manual">LDAP user and group</a> App in OwnCloud,
we could hook our LDAP server into OwnCloud. However, the Group selection to
narrow down the users who are allowed to log into OwnCloud was disabled, since
the <code>memberOf</code> <a href="http://www.openldap.org/doc/admin24/overlays.html" title="OpenLDAP overlays">LDAP Overlay</a> was not yet supported by our companys LDAP.</p>

<p>The goal was to put all users into a group called <code>onwCloud</code> which should be
able to log into OwnCloud as seen in this screenshot:</p>


<figure class="image-left">
    
        <img src="/media/blog/owncloud-ldap-configuration.png" class="img-responsive"  />
    
    
</figure>



<h1 id="adding-the-memberof-overlay">Adding the memberOf Overlay</h1>

<p>We are using <code>OpenLDAP 2.4.4</code> with a <a href="http://www.openldap.org/doc/admin24/backends.html" title="OpenLDAP Backends">LMDB Backend</a>, so the following <code>ldif</code>
configurations make use of the new configuration and this backend.</p>

<p>First we created the files <code>/etc/ldap/memberof.ldif</code> and <code>/etc/ldap/refint.ldif</code>
on our LDAP Server with the following contents.</p>

<p><code>memberof.ldif</code>:</p>

<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>  <span style="color: #a6e22e">dn</span><span style="color: #f92672">:</span> <span style="color: #e6db74">cn=module,cn=config</span>
  <span style="color: #a6e22e">cn</span><span style="color: #f92672">:</span> <span style="color: #e6db74">module</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcModuleList</span>
  <span style="color: #a6e22e">objectclass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">top</span>
  <span style="color: #a6e22e">olcModuleLoad</span><span style="color: #f92672">:</span> <span style="color: #e6db74">memberof.la</span>
  <span style="color: #a6e22e">olcModulePath</span><span style="color: #f92672">:</span> <span style="color: #e6db74">/usr/lib/ldap</span>

  <span style="color: #a6e22e">dn</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcOverlay={0}memberof,olcDatabase={1}mdb,cn=config</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcConfig</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcMemberOf</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcOverlayConfig</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">top</span>
  <span style="color: #a6e22e">olcOverlay</span><span style="color: #f92672">:</span> <span style="color: #e6db74">memberof</span>
  <span style="color: #a6e22e">olcMemberOfDangling</span><span style="color: #f92672">:</span> <span style="color: #e6db74">ignore</span>
  <span style="color: #a6e22e">olcMemberOfRefInt</span><span style="color: #f92672">:</span> <span style="color: #e6db74">TRUE</span>
  <span style="color: #a6e22e">olcMemberOfGroupOC</span><span style="color: #f92672">:</span> <span style="color: #e6db74">groupOfNames</span>
  <span style="color: #a6e22e">olcMemberOfMemberAD</span><span style="color: #f92672">:</span> <span style="color: #e6db74">member</span>
  <span style="color: #a6e22e">olcMemberOfMemberOfAD</span><span style="color: #f92672">:</span> <span style="color: #e6db74">memberOf</span>
</pre></div>


<p><code>refint.ldif</code>:
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>  <span style="color: #a6e22e">dn</span><span style="color: #f92672">:</span> <span style="color: #e6db74">cn=module,cn=config</span>
  <span style="color: #a6e22e">cn</span><span style="color: #f92672">:</span> <span style="color: #e6db74">module</span>
  <span style="color: #a6e22e">objectclass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcModuleList</span>
  <span style="color: #a6e22e">objectclass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">top</span>
  <span style="color: #a6e22e">olcmoduleload</span><span style="color: #f92672">:</span> <span style="color: #e6db74">refint.la</span>
  <span style="color: #a6e22e">olcmodulepath</span><span style="color: #f92672">:</span> <span style="color: #e6db74">/usr/lib/ldap</span>

  <span style="color: #a6e22e">dn</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcOverlay={1}refint,olcDatabase={1}mdb,cn=config</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcConfig</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcOverlayConfig</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">olcRefintConfig</span>
  <span style="color: #a6e22e">objectClass</span><span style="color: #f92672">:</span> <span style="color: #e6db74">top</span>
  <span style="color: #a6e22e">olcOverlay</span><span style="color: #f92672">:</span> <span style="color: #e6db74">{1}refint</span>
  <span style="color: #a6e22e">olcRefintAttribute</span><span style="color: #f92672">:</span> <span style="color: #e6db74">memberof member manager owner</span>
</pre></div>
</p>

<div class="container rb-divider">
  <div class="row">
    <div class="dividewhite2"></div>
    <div class="e-block-centered">
      &mdash; <img src="/img/rb_logo_32x32.png" /> &mdash;
    </div>
    <div class="dividewhite2"></div>
  </div>
</div>


<p>Then we added the configurations to our OpenLDAP with the <a href="http://www.openldap.org/software//man.cgi?query=ldapmodify&amp;sektion=1&amp;apropos=0&amp;manpath=OpenLDAP+2.4-Release" title="ldapmodify, ldapadd">ldapadd</a> command:</p>

<pre><code>ldapadd -Q -Y EXTERNAL -H ldapi:/// -f memberof.ldif
ldapadd -Q -Y EXTERNAL -H ldapi:/// -f refint.ldif
</code></pre>

<p>In the next step we added a <code>groupOfNames</code> object <code>cn=ownCloud</code> to our LDAP:</p>


<figure class="image-left">
    
        <img src="/media/blog/openldap-groupOfNames.png" class="img-responsive"  />
    
    
</figure>



<p>And added a <em>Test User</em> <code>uid=testuser</code> as a <code>member</code> to this group:</p>


<figure class="image-left">
    
        <img src="/media/blog/openldap-member.png" class="img-responsive"  />
    
    
</figure>



<div class="container rb-divider">
  <div class="row">
    <div class="dividewhite2"></div>
    <div class="e-block-centered">
      &mdash; <img src="/img/rb_logo_32x32.png" /> &mdash;
    </div>
    <div class="dividewhite2"></div>
  </div>
</div>


<p>Finally we tested the group ownership:</p>

<pre><code>root@ridingbytes:~# ldapsearch -LL -Y EXTERNAL -H ldapi:/// &quot;(uid=testuser)&quot; -b dc=ridingbytes,dc=com memberOf
SASL/EXTERNAL authentication started
SASL username: gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth
SASL SSF: 0
version: 1

dn: cn=Test User,ou=users,dc=ridingbytes,dc=com
memberOf: cn=ownCloud,ou=groups,dc=ridingbytes,dc=com
</code></pre>

<h2 id="conclusion">Conclusion</h2>

<p>OpenLDAP plays now nicely with OwnCloud and the Group Selection is fully
functioning. Only members of the <code>ownCloud</code> group are allowed to log into
OwnCloud.</p>

<p>Another great example how Open Source Software provides enterprise functionality
without any license costs or vendor lock-ins. Thanks to the developers and the
Open Source Community for this brilliant pieces of Software.</p>

<div class="container rb-divider">
  <div class="row">
    <div class="dividewhite2"></div>
    <div class="e-block-centered">
      &mdash; <img src="/img/rb_logo_32x32.png" /> &mdash;
    </div>
    <div class="dividewhite2"></div>
  </div>
</div>


            
            
<div class="widget">
  <div class="widget_facebook">
    <h4 class="font-accident-one-bold uppercase"></h4>

    <div class="fb-page"
         data-href="https://www.facebook.com/ridingbytes"
         data-small-header="true"
         data-hide-cta="true"
         data-adapt-container-width="true"
         data-hide-cover="true"
         data-show-facepile="false">
      <div class="fb-xfbml-parse-ignore">
        <blockquote cite="https://www.facebook.com/ridingbytes">
          <a href="https://www.facebook.com/ridingbytes">RIDING BYTES</a>
        </blockquote>
      </div>
    </div>

    <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/de_DE/sdk.js#xfbml=1&version=v2.5";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>

  </div>
</div>


            
          </div>
        </div>

        <div class="row">
          <div class="col-md-12 post-content">
            
            <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'ridingbytes';

    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


            
          </div>
        </div>
      </div>

    </div>
    

    
    <a class="gm-toggle-link">
      <div class="gm-toggle">
        <i class="fa fa-map-marker"></i>
      </div>
    </a>
    <div id="gm-panel">
        <div id="google-map" class="bigmap"></div>
    </div>
    

    
    <div id="footer">
      
      <div class="container">

  <div class="row">

    
    <div class="col-sm-3">
      
<div class="infoblock">
  <h2 class="font-accident-one-bold">Riding Bytes</h2>

  
  <p class=" ">RIDING BYTES is a web development company, which is specialized in UI/UX design, server based solutions and consulting services.</p>
  
  <p class=" ">With over 10 years of experience in web development and consulting, we provide the right solutions for small, medium and large enterprises.</p>
  

</div>


    </div>

    
    <div class="col-sm-3">
      
<div class="infoblock">
  <h2 class="font-accident-one-bold">Contact</h2>

  
  <div class="contact">

    
    
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-home"></i></div>
      <div class="addr-text">RIDING BYTES UG (haftungsbeschrÃ¤nkt), WÃ¼rzburger StraÃe 81, 90766 FÃ¼rth, Germany</div>
    </div>
    

    
    
    <div class="dividewhite1"></div>
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-phone"></i></div>
      <div class="addr-text"><a href="tel:&#43;49%20%280%29%20911%20974%20930%2090">&#43;49 (0) 911 974 930 90</a></div>
    </div>
    

    
    
    <div class="dividewhite1"></div>
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-link"></i></div>
      <div class="addr-text"><a href="http://ridingbytes.com">http://ridingbytes.com</a></div>
    </div>
    

    
    
    <div class="dividewhite1"></div>
    <div class="footer-addr">
      <div class="footer-icon"><i class="fa fa-envelope"></i></div>
      <div class="addr-text"><a href="mailto:hello@ridingbytes.com">hello@ridingbytes.com</a></div>
    </div>
    

  </div>
  

</div>


    </div>
    

    
    <div class="col-sm-3">
      
  <div class="infoblock">
    <h2 class="font-accident-one-bold">Impressions</h2>
    <ul id="basicuse" class="thumbs"></ul>
  </div>


    </div>
    

    
    <div class="col-sm-3">
      
<div class="infoblock">

  <h2 class="font-accident-one-bold"> Follow us </h2>
  <div class="follow">

    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-facebook"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://www.facebook.com/ridingbytes">Facebook</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-github"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://github.com/ridingbytes">GitHub</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-linkedin"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://www.linkedin.com/company/riding-bytes">LinkedIn</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    
    <div class="follow-element">
      <div class="follow-icon"><i class="fa fa-twitter"></i></div>
      <div class="follow-descr">
        <div class="follow-social"><a href="https://twitter.com/ridingbytes">Twitter</a></div>
      </div>
    </div>
    <div class="dividewhite1"></div>
    

  </div>
</div>


    </div>
    

  </div>
</div>




<img src="https://piwik.ridingbytes.com/piwik.php?idsite=1&rec=1" style="border:0" alt="Piwik" />






      
      
<div id="copyrights-wrapper">
  <div class="container">
    <div class="copyright">
      <div class="copy-attrs">
        &copy; 2015 - 2017
        <a href="/" target="_blank">RIDING BYTES</a>. All rights reserved
      </div>

      
      <div class="copy-link">
        <a href="/legal">Legal Notice</a>
      </div>
      

    </div>
  </div>
</div>


    </div>
    

    
    <div id="back-top"><a href="#top"></a></div>
    

  </body>
</html>
